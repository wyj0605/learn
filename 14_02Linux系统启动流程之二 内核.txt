grub.conf
default=0
timeout=5
splashimage=(hd0,0)/grub/splash.xpm.gz #背景图片
#password wyj
password --md5 $1$owhNb1$.I26TYRPo3BGeAbmdw1EO. #编辑时输入的密码










reunlevel 运行级别
who -r 也可显示当前运行级别


手工损坏grub 启动

[root@localhost ~]# dd if=/dev/zero of=/dev/sda count=1 bs=400
1+0 records in
1+0 records out
400 bytes (400 B) copied, 3.475e-05 seconds, 11.5 MB/s
[root@localhost ~]# sync


grub>
      root (hd1,0)

Error 21: Selected disk does not exist

grub>
grub> root (hd1,0)
      root (hd0,0)
 Filesystem type is ext2fs, partition type 0x83

grub>
      setup

Error 11: Unrecognized device string

grub>
      setup

Error 11: Unrecognized device string

grub>
      setup (hd1)
 Checking if "/boot/grub/stage1" exists... no
 Checking if "/grub/stage1" exists... yes
 Checking if "/grub/stage2" exists... yes
 Checking if "/grub/e2fs_stage1_5" exists... yes
 Running "embed /grub/e2fs_stage1_5 (hd1)"... failed (this is
not fatal)
 Running "embed /grub/e2fs_stage1_5 (hd0,0)"... failed (this i
s not fatal)
 Running "install /grub/stage1 d (hd1) /grub/stage2 p /grub/gr
ub.conf "... failed

Error 21: Selected disk does not exist

grub>



成功安装后的提示


grub>
      setup (hd0,0)
 Checking if "/boot/grub/stage1" exists... no
 Checking if "/grub/stage1" exists... yes
 Checking if "/grub/stage2" exists... yes
 Checking if "/grub/e2fs_stage1_5" exists... yes
 Running "embed /grub/e2fs_stage1_5 (hd0,0)"... failed (this i
s not fatal)
 Running "embed /grub/e2fs_stage1_5 (hd0,0)"... failed (this i
s not fatal)
 Running "install /grub/stage1 (hd0,0) /grub/stage2 p /grub/gr
ub.conf "... succeeded
Done.

grub>






grub 安装一

	grub>
	     root (hd0,0)   指定内核所在的分区，如果不存在，可以改用 （hd1,0)
	     set (hd0)
	     setup (hd1)
	     quit

grub 安装二

grub-intslll --root-directory=/boot  boot的父目录

grub 安装三
grub丢失的情况 下


find #尝试找内核所在的分区
root (hd#,N)  #尝试找内核
kernel /PATH/TO/KERNEL #提示可以，/tab会有提示内核vmlinux
initrd /PATH/TO/INITRD_FILE #同理
boot #启 动







Kernel 初始的过程：
1、设备的探测
2、驱动初始化（可能从initrd(initramfs)文件中装载驱动模块)
3、以只读挂载根文件系统
4、装载第一个进程 init(PID 1)


/sbin/init:(/etc/inittab)
	upstart : ubuntu开发的。readhat6上使用的。
	systemd : 并行的启动多个服务

id:runlevels:action:process

id：标识符
runlevels:在哪个级别运行此行
action:在什么情况下执行此行
process：要运行程序

si::sysinit:/etc/rc.d/rc.sysinit
ACTION：
initdefault：设定的默认值
sysinit:系统初始化
wait:等待级别









/etc/rc.d/rc.sysinit 完成的任务
1、激活udev和selinux
2、根据/etc/sysctl.conf 文件，来设定内核参数
3、设定时钟
4、装载键盘映射
5、启用交换分区
6、设置主机名
7、根文件系统检测，并以读写方式重新挂载
8、激活RAID和LVM设备
9、启用磁盘配额
10、根据/etc/fstab，检查并挂载其它文件系统
11、清理过期的锁和PID的文件